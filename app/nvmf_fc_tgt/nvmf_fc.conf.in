# NVMf FC Target Configuration File
#
# Please write all parameters using ASCII.
# The parameter must be quoted if it includes whitespace.
#
# Configuration syntax:
# Leading whitespace is ignored.
# Lines starting with '#' are comments.
# Lines ending with '\' are concatenated with the next line.
# Bracketed ([]) names define sections

[Global]
  # Users can restrict work items to only run on certain cores by
  #  specifying a ReactorMask.  Default ReactorMask mask is defined as
  #  -c option in the 'ealargs' setting at beginning of file nvmf_tgt.c.
  ReactorMask 0xFF

  # Tracepoint group mask for spdk trace buffers
  # Default: 0x0 (all tracepoint groups disabled)
  # Set to 0xFFFFFFFFFFFFFFFF to enable all tracepoint groups.
  #TpointGroupMask 0x0

  # syslog facility
  LogFacility "local7"

[Rpc]
  # Defines whether to enable configuration via RPC.
  # Default is disabled.  Note that the RPC interface is not
  # authenticated, so users should be careful about enabling
  # RPC in non-trusted environments.
  Enable No
  # Listen address for the RPC service.
  # May be an IP address or an absolute path to a Unix socket.
  Listen 127.0.0.1

# Users may change this section to create a different number or size of
#  malloc LUNs.
# This will generate 8 LUNs with a malloc-allocated backend.
# Each LUN will be size 64MB and these will be named
# Malloc0 through Malloc7.  Not all LUNs defined here are necessarily
#  used below.
[Malloc]
  NumberOfLuns 8
  LunSizeInMB 64

# Define NVMf protocol global options
[Nvmf]
  # Maximum number of associations for the system 
  MaxAssociations 8
 
  # Maximum admin queue depth
  MaxAqDepth 32

  # For FC MaxQueuesPerSession is the maximum number of connections per assoc.
  MaxQueuesPerSession 4

#[Nvme]
  # NVMe Device Whitelist
  # Users may specify which NVMe devices to claim by their transport id.
  # See spdk_nvme_transport_id_parse() in spdk/nvme.h for the correct format.
  # The second argument is the assigned name, which can be referenced from
  # other sections in the configuration file. For NVMe devices, a namespace
  # is automatically appended to each name in the format <YourName>nY, where
  # Y is the NSID (starts at 1).
  #TransportId "trtype:PCIe traddr:0000:00:00.0" Nvme0
  #TransportId "trtype:PCIe traddr:0000:01:00.0" Nvme1

  # The number of attempts per I/O when an I/O fails. Do not include
  # this key to get the default behavior.
  #RetryCount 4
  # Timeout for each command, in seconds. If 0, don't track timeouts.
  #Timeout 0
  # Action to take on command time out. Only valid when Timeout is greater
  # than 0. This may be 'Reset' to reset the controller, 'Abort' to abort
  # the command, or 'None' to just print a message but do nothing.
  # Admin command timeouts will always result in a reset.
  #ActionOnTimeout None
  # Set how often the admin queue is polled for asynchronous events.
  # Units in microseconds.
  #AdminPollRate 100000

  # Enable handling of hotplug (runtime insert and remove) events
  #HotplugEnable Yes

# The Split virtual block device slices block devices into multiple smaller bdevs.
#[Split]
  # Syntax:
  #   Split <bdev> <count> [<size_in_megabytes>]

  # Split Malloc2 into two equally-sized portions, Malloc2p0 and Malloc2p1
  #Split Malloc2 2

  # Split Malloc3 into eight 1-megabyte portions, Malloc3p0 ... Malloc3p7,
  # leaving the rest of the device inaccessible
  #Split Malloc3 8 1

# Define an NVMf Subsystem.
# - NQN is required and must be unique.
# - Mode may be either "Direct" or "Virtual". Direct means that physical
#   devices attached to the target will be presented to hosts as if they
#   were directly attached to the host. No software emulation or command
#   validation is performed. Virtual means that an NVMe controller is
#   emulated in software and the namespaces it contains map to block devices
#   on the target system. These block devices do not need to be NVMe devices.
#   Only Direct mode is currently supported.
# - Between 0 and 255 Host directives are allowed. This defines the
#   NQNs of allowed hosts. If no Host directive is specified, all hosts
#   are allowed to connect.

# Multiple subsystems are allowed.
[Subsystem1]
  NQN nqn.2016-06.io.spdk:cnode2
  Mode Virtual
  SN SPDK00000000000001
  Namespace Malloc0
  Namespace Malloc1

# Group of FC initiators WWN.
[InitiatorGroup0]
  WWN ALL

# FCHbaPort section contains the information related to physical FC
# ports in the system.
[HBAPort0]
  #WWPN 10:00:00:10:c9:12:96:02
  #WWNN 20:00:00:10:c9:12:96:02
  MRQ 1

[HBAPort1]
  #WWPN 10:00:00:10:c9:12:96:03
  #WWNN 20:00:00:10:c9:12:96:03
  MRQ 1

[HBAPort2]
  #WWPN 10:00:00:10:c9:12:96:04
  #WWNN 20:00:00:10:c9:12:96:04
  MRQ 1
  
[HBAPort3]
  #WWPN 10:00:00:10:c9:12:96:05
  #WWNN 20:00:00:10:c9:12:96:05
  MRQ 1
  
# SCSI Lun Mapping section allows to map a list of luns to be exposed
# on a given list of FCHbaPorts for a given list of initiators.
# There can be multiple mappings defined for an FCHbaPort, But
# make sure an initiator WWN is only part of one mapping on
# a given FCHbaPort.
[LunMapping0]
  LUN0 Malloc6
  Mapping HBAPort0 InitiatorGroup0
  
[LunMapping1]
  LUN0 Malloc7
  Mapping HBAPort1 InitiatorGroup0
 
